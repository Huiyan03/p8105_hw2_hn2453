p8105_hw2_hn2453
================
Huiyan Ni
2024-10-02

## problem 1

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

Import the data related to each entrance and exit for each subway
station in NYC. Read and clean the data; retain line, station, name,
station latitude / longitude, routes served, entry, vending, entrance
type, and ADA compliance.

``` r
nyc_sub = read_csv("data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
                   col_types = cols(Route8 = "c", Route9 = "c", Route10 = "c", Route11 = "c"))

nyc_sub = nyc_sub |> janitor::clean_names() |> 
  select(
    line, station_name, station_latitude, station_longitude, 
    starts_with("route"), entry, exit_only, vending, entrance_type, 
    ada) |> 
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

After importing original dataset, making route variables to character
variable, selecting line, station_name, station_latitude,
station_longitude, all route variables, entry, exit_only, vending,
entrance_type, and ada columns, and convert the entry variable from
character to a logical variable, now the dataset is 1868 \* 20.

How many distinct stations are there?

``` r
nyc_sub |> 
  select(station_name, line) |> 
  distinct()
```

    ## # A tibble: 465 × 2
    ##    station_name             line    
    ##    <chr>                    <chr>   
    ##  1 25th St                  4 Avenue
    ##  2 36th St                  4 Avenue
    ##  3 45th St                  4 Avenue
    ##  4 53rd St                  4 Avenue
    ##  5 59th St                  4 Avenue
    ##  6 77th St                  4 Avenue
    ##  7 86th St                  4 Avenue
    ##  8 95th St                  4 Avenue
    ##  9 9th St                   4 Avenue
    ## 10 Atlantic Av-Barclays Ctr 4 Avenue
    ## # ℹ 455 more rows

There are totally 465 rows, thus, there are 465 distinct stations.

How many stations are ADA compliant?

``` r
nyc_sub |> 
  filter(ada == TRUE) |> 
  select(station_name, line) |> 
  distinct()
```

    ## # A tibble: 84 × 2
    ##    station_name                   line           
    ##    <chr>                          <chr>          
    ##  1 Atlantic Av-Barclays Ctr       4 Avenue       
    ##  2 DeKalb Av                      4 Avenue       
    ##  3 Pacific St                     4 Avenue       
    ##  4 Grand Central                  42nd St Shuttle
    ##  5 34th St                        6 Avenue       
    ##  6 47-50th Sts Rockefeller Center 6 Avenue       
    ##  7 Church Av                      6 Avenue       
    ##  8 21st St                        63rd Street    
    ##  9 Lexington Av                   63rd Street    
    ## 10 Roosevelt Island               63rd Street    
    ## # ℹ 74 more rows

There are totally 84 rows, thus, 84 distinct stations are ADA compliant.

What proportion of station entrances / exits without vending allow
entrance?

``` r
nyc_sub |> 
  filter(vending == "NO") |> 
  pull(entry) |> 
  mean()
```

    ## [1] 0.3770492

The proportion of station entrances without vending allow entrance is
about 0.377.

Reformat data so that route number and route name are distinct
variables.How many distinct stations serve the A train? Of the stations
that serve the A train, how many are ADA compliant?

``` r
nyc_sub |> 
  pivot_longer(
    route1:route11,
    names_to = "route_num",
    values_to = "route") |> 
  filter(route == "A") |> 
  select(station_name, line) |> 
  distinct()
```

    ## # A tibble: 60 × 2
    ##    station_name                  line           
    ##    <chr>                         <chr>          
    ##  1 Times Square                  42nd St Shuttle
    ##  2 125th St                      8 Avenue       
    ##  3 145th St                      8 Avenue       
    ##  4 14th St                       8 Avenue       
    ##  5 168th St - Washington Heights 8 Avenue       
    ##  6 175th St                      8 Avenue       
    ##  7 181st St                      8 Avenue       
    ##  8 190th St                      8 Avenue       
    ##  9 34th St                       8 Avenue       
    ## 10 42nd St                       8 Avenue       
    ## # ℹ 50 more rows

``` r
nyc_sub |> 
  pivot_longer(
    route1:route11,
    names_to = "route_num",
    values_to = "route") |> 
  filter(route == "A", ada == TRUE) |> 
  select(station_name, line) |> 
  distinct()
```

    ## # A tibble: 17 × 2
    ##    station_name                  line            
    ##    <chr>                         <chr>           
    ##  1 14th St                       8 Avenue        
    ##  2 168th St - Washington Heights 8 Avenue        
    ##  3 175th St                      8 Avenue        
    ##  4 34th St                       8 Avenue        
    ##  5 42nd St                       8 Avenue        
    ##  6 59th St                       8 Avenue        
    ##  7 Inwood - 207th St             8 Avenue        
    ##  8 West 4th St                   8 Avenue        
    ##  9 World Trade Center            8 Avenue        
    ## 10 Times Square-42nd St          Broadway        
    ## 11 59th St-Columbus Circle       Broadway-7th Ave
    ## 12 Times Square                  Broadway-7th Ave
    ## 13 8th Av                        Canarsie        
    ## 14 Franklin Av                   Franklin        
    ## 15 Euclid Av                     Fulton          
    ## 16 Franklin Av                   Fulton          
    ## 17 Howard Beach                  Rockaway

60 distinct stations serve the A train, and 17 stations that serve the A
train are ADA compliant.

## problem 2

Read and clean the Mr. Trash Wheel sheet. Specify the import sheet is
“Mr. Trash Wheel”, skip the first row due to the rows is non-data,
define blank as na, convert variable names to reasonable variable names,
omit rows that do not include dumpster-specific data(value is na), round
the number of sports balls to the nearest integer and converts the
result to an integer variable, and remove 2 useless columns producing
after import data.

``` r
mr_trash = 
  read_excel("data/202409 Trash Wheel Collection Data.xlsx", 
                      sheet = "Mr. Trash Wheel",
                      col_names = TRUE,
                      skip = 1,
                      na = c("","NA")) |> 
  janitor::clean_names() |>
  filter(!is.na(dumpster)) |>
  mutate(sports_balls = as.integer(round(sports_balls)))
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
 mr_trash = mr_trash |> select(-x15,-x16)
 head(mr_trash)
```

    ## # A tibble: 6 × 14
    ##   dumpster month year  date                weight_tons volume_cubic_yards
    ##      <dbl> <chr> <chr> <dttm>                    <dbl>              <dbl>
    ## 1        1 May   2014  2014-05-16 00:00:00        4.31                 18
    ## 2        2 May   2014  2014-05-16 00:00:00        2.74                 13
    ## 3        3 May   2014  2014-05-16 00:00:00        3.45                 15
    ## 4        4 May   2014  2014-05-17 00:00:00        3.1                  15
    ## 5        5 May   2014  2014-05-17 00:00:00        4.06                 18
    ## 6        6 May   2014  2014-05-20 00:00:00        2.71                 13
    ## # ℹ 8 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <int>, homes_powered <dbl>

Use a similar process to import, clean, and organize the data for
Professor Trash Wheel and Gwynnda.

``` r
pro_trash = 
  read_excel("data/202409 Trash Wheel Collection Data.xlsx", 
                      sheet = "Professor Trash Wheel",
                      col_names = TRUE,
                      skip = 1,
                      na = c("","NA")) |> 
  janitor::clean_names() |>
  filter(!is.na(dumpster))
  
 head(pro_trash)
```

    ## # A tibble: 6 × 13
    ##   dumpster month     year date                weight_tons volume_cubic_yards
    ##      <dbl> <chr>    <dbl> <dttm>                    <dbl>              <dbl>
    ## 1        1 January   2017 2017-01-02 00:00:00        1.79                 15
    ## 2        2 January   2017 2017-01-30 00:00:00        1.58                 15
    ## 3        3 February  2017 2017-02-26 00:00:00        2.32                 18
    ## 4        4 February  2017 2017-02-26 00:00:00        3.72                 15
    ## 5        5 February  2017 2017-02-28 00:00:00        1.45                 15
    ## 6        6 March     2017 2017-03-30 00:00:00        1.71                 15
    ## # ℹ 7 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, homes_powered <dbl>

``` r
gwy_trash = 
  read_excel("data/202409 Trash Wheel Collection Data.xlsx", 
                      sheet = "Gwynnda Trash Wheel",
                      col_names = TRUE,
                      skip = 1,
                      na = c("","NA")) |> 
  janitor::clean_names() |>
  filter(!is.na(dumpster))

head(gwy_trash)
```

    ## # A tibble: 6 × 12
    ##   dumpster month   year date                weight_tons volume_cubic_yards
    ##      <dbl> <chr>  <dbl> <dttm>                    <dbl>              <dbl>
    ## 1        1 July    2021 2021-07-03 00:00:00        0.93                 15
    ## 2        2 July    2021 2021-07-07 00:00:00        2.26                 15
    ## 3        3 July    2021 2021-07-07 00:00:00        1.62                 15
    ## 4        4 July    2021 2021-07-16 00:00:00        1.76                 15
    ## 5        5 July    2021 2021-07-30 00:00:00        1.53                 15
    ## 6        6 August  2021 2021-08-11 00:00:00        2.06                 15
    ## # ℹ 6 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   homes_powered <dbl>

Add an additional variable to note different trash wheel before
combining these data sets.

``` r
mr_trash = mr_trash |> mutate(wheel_name = "Mr. Trash Wheel")
pro_trash = pro_trash |> mutate(wheel_name = "Professor Trash Wheel")
gwy_trash = gwy_trash |> mutate(wheel_name = "Gwynnda Trash Wheel")
```

Combining these data sets.

``` r
mr_trash$year = as.numeric(mr_trash$year)
trash_wheel = bind_rows(mr_trash,pro_trash,gwy_trash)
trash_wheel
```

    ## # A tibble: 1,033 × 15
    ##    dumpster month  year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr> <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 May    2014 2014-05-16 00:00:00        4.31                 18
    ##  2        2 May    2014 2014-05-16 00:00:00        2.74                 13
    ##  3        3 May    2014 2014-05-16 00:00:00        3.45                 15
    ##  4        4 May    2014 2014-05-17 00:00:00        3.1                  15
    ##  5        5 May    2014 2014-05-17 00:00:00        4.06                 18
    ##  6        6 May    2014 2014-05-20 00:00:00        2.71                 13
    ##  7        7 May    2014 2014-05-21 00:00:00        1.91                  8
    ##  8        8 May    2014 2014-05-28 00:00:00        3.7                  16
    ##  9        9 June   2014 2014-06-05 00:00:00        2.52                 14
    ## 10       10 June   2014 2014-06-11 00:00:00        3.76                 18
    ## # ℹ 1,023 more rows
    ## # ℹ 9 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <int>, homes_powered <dbl>, wheel_name <chr>

From the tibble, we have 1033 rows, and 15 variables: dumpster, month,
year, date, weight_tons, volume_cubic_yard, plastic_bottles,
polystyrene, cigarette_butts, glass_bottles, plastic_bags, wrappers,
sports_balls, homes_powered, and wheel_name.

What was the total weight of trash collected by Professor Trash Wheel?

``` r
weight_pro = trash_wheel |> 
  filter(wheel_name == "Professor Trash Wheel") |> 
  pull(weight_tons) |> 
  sum(na.rm=TRUE)
```

The total weight of trash collected by Professor Trash Wheel is 246.74
tons.

What was the total number of cigarette butts collected by Gwynnda in
June of 2022?

``` r
cigarette_gwy = trash_wheel |>
  filter(wheel_name == "Gwynnda Trash Wheel") |>
  filter(month == "June") |>
  filter(year == "2022") |>
  pull(cigarette_butts) |>
  sum(na.rm=TRUE)

cigarette_gwy
```

    ## [1] 18120

The total number of cigarette butts collected by Gwynnda in June of 2022
is 1.812^{4}
